<!-- views/profile.ejs -->
<!doctype html>
<html>
<head>
    <title>Dashboard - Ed Tech RCE Coach</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.feedback_me.js"></script>
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,400,700);" />
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="/static/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/static/css/jquery.feedback_me.css"  />

</head>
<body>
    <% include ../views/partials/header.html %>
<div class="container-fluid">
    <input type="hidden" id="user_name" value="<%= user.profile.user_name %>"/>
    <input type="hidden" id="user_email" value="<%= user.email %>" />
    <div class="page-header">
        <h1 class="page-title">Evaluation Dashboard.</h1>

    </div>

    <div class="row">


        <div class="col-sm-3">
            <div class="dash-well">
                <h2 class="text-center"> <%= user.profile.user_name %>
                </h2>
                <% var role = user.profile.role; if (role == "other") (role =user.profile.role_other ) %>
                <p class="text-center"><%= role %></p>

                <p class="text-center">

                    <span class="fa fa-user fa-5x" style="color: #dddddd;"></span>
                 
                </p>
                <p class="text-center">
                    <%= user.profile.organization_name %>
                </p>

            </div>
        </div>
        <div class="col-sm-9">
            <%
            var evallabel = "Begin Evaluation"
            var evaltitle = "Ready to test an app?";
            var status= "New";
            var helpcaret = "fa-caret-down";
            var helphidden = "false"
            var helpdetail = "in"
            if (eval) {
            evaltitle = eval.title; status=eval.status;
            evallabel = "Current Evaluation";
            helpcaret = "fa-caret-right";
            helphidden = "true"
            helpdetail = ""
            if (eval.created_at)
            {
            startdate = eval.created_at;
            }
            }
            %>
           
                <div class="panel panel-default dash-well">
                    <div class="panel-heading">
                        <h2 class="panel-title  clickable">                         
                            <a data-toggle="collapse" data-parent="#dashboard" href="#welcomeDetails">
                                <span class="fa <%= helpcaret %>" aria-hidden="false"></span> Welcome <%= user.profile.user_name %></a>
                        </h2>
                    </div>
                    <div id="welcomeDetails" class="panel-collapse collapse <%= helpdetail %>">
                        <div class="help-panel help-main">
                            <h3 class="sec-label">What does it take to conduct a rapid cycle evaluation? </h3>
                            <p>Read the basics on using the Ed Tech Rapid Cycle Evaluation Coach to conduct your own RCE. This overview shows the steps that you’ll need to complete and the tools that will help you through the process. </p>
                            <p class="pull-right">
                                <a onclick=" window.open('/static/pdf/01.02ChooseATechnology.pdf', ''); return false; " href="javascript:void(0);" style="font-size:1.1em;">View <span class="fa fa-download" aria-hidden="true"></span></a>
                            </p>
                            <div class="clearfix"></div>
                        </div>
                            <div class="col-sm-6 help-panel help-sec">
                                <h3 class="sec-label">Choosing a technology</h3>
                                <p>See how to choose a technology. Identifies useful resources for finding and assessing educational technologies.</p>
                                <p class="pull-right"><a onclick=" window.open('/static/pdf/01.02ChooseATechnology.pdf', ''); return false; " href="javascript:void(0);" style="font-size:1.1em;">View <span class="fa fa-download" aria-hidden="true"></span></a>
                                </p>
                            </div>
                            <div class="col-sm-6 help-panel ">
                                <h3 class="sec-label">Understanding types of evidence.</h3>
                                <p>Describes common types of effectiveness evidence. Explains how to tell if the evidence can support effectiveness claims.</p>
                                <p class="pull-right">
                                    <a onclick=" window.open('/static/pdf/01.03UnderstandTypesofEvidence.pdf', ''); return false; " href="javascript:void(0);" style="font-size:1.1em;">View <span class="fa fa-download" aria-hidden="true"></span></a>
                                </p>
                            </div>
                            <div class="clearfix"></div>
                        
                    </div>
                    <div class="clearfix"></div>
                 </div>
               
           
            <div class="dash-well">
               
                <div class="sec-label"><%= evallabel %></div>

                <h2><%= evaltitle %></h2>

                <p>

                <% if (eval) { %>
                <p>
                    <span class="sec-label">Status</span>: <%= status %>
                </p>
                <div>
                    <p class="text-center add-padding">
                        <a class="text-right btn btn-primary" href="/wizard" id="startEval" class="btn btn-primary btn-lg">CONTINUE THIS EVALUATION</a> <br/>
                    </p>

                </div>
                <div class="text-right" style="clear: both; margin-bottom: -19px;">
                    <p>
                        <button type="button" class="btn-link sec-label" role="link" data-toggle="modal" data-target="#myModal">START A NEW EVALUATION <span class="fa fa-caret-right"></span></button><br/>
                        <a href="#" class="sec-label">View all of your evaluations <span class="fa fa-caret-right"></span></a>
                    </p>
                </div>
                <% } %>

                <% if (!eval) { %>
                <p>
                    Let the RCE Evaluation Wizard guide you through each step of evaluating your educational technology.
                </p>
                <div>
                    <p class="text-center add-padding">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">START EVALUATION</button>
                    </p>
                </div>
                <% } %>

                <!-- Trigger the modal with a button -->
                <!-- Modal -->
                <div id="myModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Enter a name for your evaluation</h4>
                            </div>
                            <div class="modal-body">
                                <% var evalid; if (eval) {evalid = eval._id} %>
                                <input type="hidden" id="evalid" value="<%= evalid %>"/>
                                <input type="text" id="title"/>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-info btn-lg" data-dismiss="modal">CANCEL</button>
                                <button type="button" id="getTitle" class="btn btn-primary btn-lg" data-dismiss="modal">OK</button>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3">

        </div>
        <div class="col-sm-9">
            <div class="well">
                <h2 class="sec-label">Preview TOOLS</h2>
                <p>Directly browse to any tool in the RCE toolkit and launch or download that tool. Every tool is available to be used outside of the Evaluation Wizard. Any information you enter when using the RCE tools for single use will not be saved or shared between other tools. </p>
                <h3>Welcome to RCE for Ed Tech</h3>
                <ul class="tool-list">

                    <li> <a onclick="window.open('/static/pdf/01.02ChooseATechnology.pdf', ''); return false" href="javascript:void(0);">How to choose a technology </a> </li>
                    <li> <a onclick="window.open('/static/pdf/01.03UnderstandTypesofEvidence.pdf', ''); return false" href="javascript:void(0);">Understand types of evidence </a> </li>

                </ul>

            </div>
        </div>
    </div>

</div>
    <% include ../views/partials/footer.html %>
<script type="text/javascript">
    $(document).ready(function () {
        //set up some minimal options for the feedback_me plugin
        fm_options = {
            bootstrap: true,
            position: "right-top",
            name_placeholder: "Name please",
            name_required: true,
            message_placeholder: "Please type your feedback here...",
            feedback_url: "/feedback",
            custom_params: {
                user_email: $("#user_email").val(),
                user_name: $("#user_name").val(),
                page: "dashboard"
            },
            delayed_options: {
                success_color: "#5cb85c",
                fail_color: "#d2322d",
                delay_success_milliseconds: 3500,
                send_success: "Thanks for your feedback."
            }
        };

        //init feedback_me plugin
        fm.init(fm_options);

    });
    $("#getTitle").click(function(e) {


        var etitle = $("#title").val();
        var url = '/api/eval';
       
        $.ajax({
            type: "POST",
            url: url,
            data: JSON.stringify({  "title": etitle }),
            dataType: "json",
            contentType: "application/json",
            success: function(data) {
                window.location = "/wizard";
            }
        }).done(function(msg) {


        });;
    })
</script>
</body>
</html>
