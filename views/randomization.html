<!--
* RCE Coach software is available through a GLPv3 open-source software license.
* Any attribution should include the following:
*   © 2016, Mathematica Policy Research, Inc. The RCE Coach software was developed by
*   Mathematica Policy Research, Inc. as part of the Rapid Cycle Tech Evaluations project funded
*   by the U.S. Department of Education’s Office of Educational Technology through
*   Contract No. ED-OOS-15-C-0053.
-->

<html>
<head>
    <title>Randomization - Ed Tech RCE Coach</title>
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,400,700);" />
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="/static/css/bootstrap-multiselect.css" />
    <link rel="stylesheet" href="/static/css/font-awesome.min.css" />
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700italic,400italic,700italic,300,400,700);" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/static/css/jquery.feedback_me.css" />
    <script src="/static/js/jquery.feedback_me.js"></script>
    <script src="/static/js/bootstrap-multiselect.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-86460597-1', 'auto');
        ga('send', 'pageview');
    </script>
    <style>
        th {
            background-color: #D9D7BE;
        }
         table, th, td {
             border-collapse: collapse;
             text-align: left;
             padding: 15px;
             border: 1px solid #BAB38F;
            
         }
        tr:nth-child(even) {background-color: #ECEBDD}
    </style>
</head>
<body>
    <div id="header"></div>
    <% if (user != "NOAUTHENTICATED") { %>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/coach"><span class="fa fa-caret-left"></span> Back to Preparing Your Data</a></li>
    </ol>
    <% if (message.length>0) { %>
    <div class="alert alert-success"><%= message %></div>
    <% } %>
    <% include ../views/partials/toolHeader.html %>
    <% } %>
<form action="/randomization" method="post">
<%
var Basics_Outcome_Other = eval.basics.Basics_Outcome_Other;
var Basics_Outcome = eval.basics.Basics_Outcome;
if (Basics_Outcome.toLowerCase() === "other") { Basics_Outcome = Basics_Outcome_Other; }
var Basics_Users_Others = eval.basics.Basics_Users_Others;
var Basics_Users = eval.basics.Basics_Users;
var Singular_User = Basics_Users.substr(0,Basics_Users.length-1)
if (Basics_Users.toLowerCase() === "other") { Basics_Users = Basics_Users_Others; }
var Basics_Tech_Name = eval.basics.Basics_Tech_Name;
var Outcome_Direction = eval.planQuestion.Outcome_Direction;
var Outcome_Measure = eval.planQuestion.Outcome_Measure ;
%>
<div class="container-fluid">
<div class="row">
    <div class="col-xs-12">
        <div class="tool-top">
            <div class="dl-guide">
            </div>
            <div class="tool-header">
                <h1 class="tool-title">Build your evaluation sample using random assignment</h1>
                <div class="tool-intro">
                    
               
                   
                </div>
                <div class="tool-help">
                   
                  
                    <p>The best test of whether or not your technology works is to randomly select some of your potential users to pilot the technology (treatment group) while others continue classroom practice as usual (comparison group) and compare outcomes between the two groups. Using chance or randomization to create the groups increases the likelihood that differences in outcomes are caused by the new technology.
                    </p>
                   
                    <p>See the <a target="_blank" href="https://edtechrce.org/static/pdf/02.04%20Randomization%20overview.pdf">Randomization Overview</a> to learn more.</p>

                    <p><strong class="begin-em">Let&rsquo;s get started!</strong></p>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
<div class="row">
    <div class="tool-questions">
        <div class="step-header container">
            <div data-toggle="collapse" data-target="#A">
                <h2 class="clickable">
                    <i class="fa fa-caret-down" aria-hidden="false"></i>  First the Coach needs some details about your plans to roll-out <%= Basics_Tech_Name %>.
                </h2>
            </div>
        </div>
        <div id="A" class="row  collapse in q-row">
            <div class="col-xs-7">

                <div class="step-subquestion">
                    <h4>
                        <label for="Basics_Users">
                            Who is using <%= Basics_Tech_Name %>?
                        </label>
                    </h4>
                </div>
                <div class="step-action">
                    <select required name="Basics_Users" id="Basics_Users">

                        <%
                        var options = ["Select an option", "students", "teachers", "other"];

                        for ( var i = 0; i < options.length; i++ )
                        {

                        var selected  = ( eval.basics.Basics_Users == options[i] ) ? "selected" : "";

                        %>
                        <option value="<%=options[ i ] %>" <%=selected %> ><%=options[ i ] %></option>
                        <%
                        }
                        %>

                    </select>

                    <div id="Question_Users_Other" hidden="true">
                        <div>
                            <label for="Basics_User_Other">Please specify:</label>
                        </div>

                        <input type="text" name='Basics_Users_other' id="Basics_Users_other" value="<%= eval.basics.Basic_Users_other %>" />
                    </div>

                    <% if (user != "NOAUTHENTICATED") { %>
                    <p class="prev-answer">
                        <i class="fa fa-hand-o-right"></i> Where did I answer this? See <a href="/basics">The Basics</a>
                    </p>
                    <% } %>
                 </div>
                <div class="step-subquestion">
                    <h4><label for="Individual_Group">Do you want to randomly assign individual <%= Basics_Users %> or groups of <%= Basics_Users %> (e.g. classes or schools) to the treatment and comparison groups?</label></h4>
                </div>
                <div class="step-action">
                    <select  name="Individual_Group" id="Individual_Group">
                        <%
                        var options = ["Select an option", "individual " + Basics_Users , "groups of " + Basics_Users ];
                        var ovals = ["Select an option", "users" , "groups" ];
                        for ( var i = 0; i < options.length; i++ )
                        {
                        var selected = ( eval.prepareRandom.Individual_Group== ovals[i] ) ? "selected" : "";
                        %>
                        <option value="<%=ovals[ i ] %>" <%=selected %> ><%=options[i] %></option>
                        <%
                        }
                        %>
                    </select>

                    <div id="Question_Cluster" hidden="true">
                        <div class="step-subquestion">
                            <h4><label for="Cluster_Group">How will you group your <%= Basics_Users %>?</label></h4>
                        </div>
                        <div class="step-action">
                            <select  name="Cluster_Group" id="Cluster_Group">
                                <%
                                var options = ["Select an option", "by class", "by school", "other" ];
                                var ovals = ["Select an option", "classes", "schools", "other" ];
                                for ( var i = 0; i < options.length; i++ )
                                {
                                var selected;
                                selected = ( eval.prepareRandom.Cluster_Group== ovals[i] ) ? "selected" : "";
                                %>
                                <option value="<%=ovals[ i ] %>" <%=selected %> ><%=options[i] %></option><%
                                }
                                %>
                            </select>
                        </div>
                            <div id="Question_Cluster_Other" hidden="true">
                                <p>
                                    <label for="Cluster_Group_Other">Please specify:</label>
                                    <input type="text" name='Cluster_Group_Other' id="Cluster_Group_Other" value="<%= eval.prepareRandom.Cluster_Group_Other %>" />
                                </p>
                            </div>

                       

                    </div>
                    <% if (user != "NOAUTHENTICATED") { %>
                    <p class="prev-answer">
                        <i class="fa fa-hand-o-right"></i> Where did I answer this? See <a href="/prepare_data_randomization">Prepare for Random Assignment</a>
                    </p>
                    <% } %>
                </div>


                <div class="step-subquestion">
                    <h4><label for="User_Limit_Exist">Are there any limits on the number of <span class="indivs-or-groups">individuals or groups</span> that can be given access to the technology?</label></h4>


                </div>
                <div class="step-action">
                    <select name="User_Limit_Exist" id="User_Limit_Exist">
                        <%
                        var options = ["Select an option", "yes", "no" ];
                        for ( var i = 0; i < options.length; i++ )
                        {
                        var selected= ( eval.random.User_Limit_Exist== options[i] ) ? "selected" : "";
                        %>
                        <option value="<%=options[ i ] %>" <%=selected %> ><%=options[i] %></option>
                        <% } %>
                    </select>
                    <div id="Question_User_Limits" hidden="true">
                        <div class="step-subquestion">

                            <h4>What are the limits?</h4>
                        </div>
                        <div class="step-action">
                            <p>

                                No more than
                                <input type="text" style="width: 40px;" name='intervention_quantity' id="intervention_quantity" value="<%= eval.random.intervention_quantity %>" />
                                <select name="intervention_type" id="intervention_type">
                                    <%

                                    var options = ["Select an option", "percent of individuals or groups", "individuals or groups" ];
                                    var ovals = ["Select an option", "percentage", "number" ];
                                    for ( var i = 0; i < options.length; i++ )
                                    {
                                    var selected = ( eval.random.intervention_type == ovals[i] ) ? "selected" : "";
                                    %>
                                    <option value="<%=ovals[ i ] %>" <%=selected %> ><%=options[i] %></option>
                                    <% }%>
                                </select> can access <%= Basics_Tech_Name %>.

                            </p>



                        </div>



                    </div>  
                </div>
                          

            </div>
            <div class="col-xs-5">
                <div class="step-to-consider">
                    <div class="step-to-consider">
                        <div class="panel-group" id="ttc5">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title sec-label clickable">
                                        <span class="fa fa-caret-down" aria-hidden="false"></span>
                                        <a data-toggle="collapse" data-parent="#ttc5" href="#consider5">
                                            Things to Consider
                                        </a>
                                    </h3>
                                </div>
                                <div id="consider5" class="panel-collapse collapse in">

                                    <p>
                                        You do not need to randomly select <%= Basics_Users %> at the individual level. It may be more feasible to select by classroom or by school. However, your ability to learn whether <%= Basics_Tech_Name %> is effective will be stronger if you can choose at the individual level.
                                    </p>
                                    <p>Do you have any resource constraints (e.g. computer or software availibility, or time constraints) that would impact the size of your treatment group? Treatment and comparison group sizes should be as similar as possible, but do not need to be equal.</p>
                                    <p>
                                        Bigger is better.  With only a few individuals or groups in your treatment and comparison groups, your results are more likely to be inconclusive. Larger samples allow you to detect smaller effects.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>




       



<div class="step-header container">
    <div data-toggle="collapse" data-target="#C">
        <h2 class="clickable">
            <i class="fa fa-caret-down" aria-hidden="false"></i> Upload your data
        </h2>
    </div>
</div>
<div id="C" class="row  collapse in q-row">
    <div class="col-xs-7">
        <div class="step-subquestion">
          

            <h4>Upload a <span data-toggle="tooltip" title="A CSV (comma separated values) file stores data in tables as plain text and is widely used to exchange or transfer information." class="tooltip-gr">CSV</span> file containing your data.
            </h4>
            <p>
                Your data file should have one row for each <span class="indiv-or-group">technology user or group of users</span> and one column for each data field (e.g, test scores and background characteristics). For more information, please read <a target="_blank" href="https://edtechrce.org/static/pdf/04.01PrepareYourDataForRandomization.pdf">Prepare Your Data for Randomization</a>.
            </p>

        </div>
        <div class="step-action">


            <input id="chosenfile" size="1" type="file" accept=".csv">


            <p class="warning">
                Before uploading data, make sure personally identifiable information (PII), such as names and descriptors that could identify your evaluation participants, has been removed.
            </p>
        </div>
        <div id='loadingmessage' class="row" hidden>
            <div class="col-sm-5 col-sm-offset-6">
                <img src='/static/image/ajax-loader.gif'/>
            </div>
        </div>
        <div class="before-upload">
            <div class="step-subquestion">
                <h4>Select the variable that contains the anonymous id that uniquely identifies each <span class="indiv-or-group">technology user or group of users</span>.</h4>
                <p><em>Required</em></p>
                

            </div>
            <div class="step-action ">

                <div>
                    <select id="unit_id" name="unit_id" class="multiselect from-upload nodefault">

                        <option value="">Select a variable</option>

                    </select>

                </div>

                <hr/>
            </div>
            <div class="step-subquestion">
                <h4>Select your pretest measure variable. </h4>
                <p><em>Recommended</em></p>

            </div>
            <div class="step-action ">
                <select id="pretest" class="multiselect from-upload nodefault">
                    <option value="Select a variable" selected="selected">Select a data field</option>
                </select>
                <hr />
            </div>
         
            
            
               
               
                <div class="step-subquestion">
                    <h4> Select the variables for the characteristics that should be balanced between the treatment and control groups? </h4>
                    <p>These are characteristics that would make you skeptical of your results if they were found to be unbalanced between groups. </p>
                    <p><em>Recommended</em></p>
                </div>
                <div class="step-action ">
                    <select id="baseline_vars" name="baseline_vars" class="multiselect from-upload" multiple="multiple">
                        <option value="Select matching variables">Select variables</option>
                    </select>
                </div>
            </div>
        </div>



    <div class="col-xs-5">
        <div class="step-to-consider">

            <div class="panel-group" id="ttc3">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title sec-label clickable">
                            <span class="fa fa-caret-down" aria-hidden="false"></span>
                            <a data-toggle="collapse" data-parent="#ttc3" href="#consider3">
                                Things to Consider
                            </a>
                        </h3>
                    </div>
                    <div id="consider3" class="panel-collapse collapse in">


                        <p>Be sure to create a key or a file that links the original names or IDs to the new anonymous IDs. You will need this key to know who was assigned to each group and to add outcome data at the end of the pilot period.</p>
                        <p> If available, the Coach will use the pretest measure and background characteristics to check the equivalence or balance of the treatment and comparison groups. If you have a small sample, the Coach may need to randomize multiple times to create balanced groups.</p>
                    
                

                            <p>
                                Please refer to the <a href="https://edtechrce.org/static/pdf/02.04%20Randomization%20overview.pdf" target="_blank">The Radomization Overview</a> for more on which variables should be included.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<div class="bottom-buttons">
    <button id="match" type="button" class="btn btn-default action-button shiny-bound-input">Randomize!</button>
    <a id="downloadData" class="btn btn-default shiny-download-link  shiny-bound-output disabled " href="#" target="_blank" disabled="disabled">
        <i class="fa fa-download"></i>
        Download
    </a>
</div>
<div id="diagnostic_error" class="shiny-html-output shiny-bound-output"></div>
<div id="save_status" class="shiny-html-output shiny-bound-output"></div>
<div id="results" class="shiny-html-output shiny-bound-output">
</div>
<div id='loadingmessage2' class="row" hidden>
    <div class="col-sm-5 col-sm-offset-6">
        <img src='/static/image/ajax-loader.gif'/>
    </div>
</div>
</div>


<input type="hidden" name="s_pretest" id="s_pretest"/>
<input type="hidden" name="s_baseline_vars" id="s_baseline_vars"/>
<input type="hidden" name="s_block_id" id="s_block_id"/>
<input type="hidden" name="s_unit_id" id="s_unit_id"/>

<input type="hidden"   name="result" id="mresult"/>

<% include ../views/partials/toolButtons.html %>
</form>

<% include ../views/partials/footer.html %>




<script src='/static/js/custom.js'></script>
    <script>
        $(document).ready(function () {
            var group = $("#Individual_Group").val();
            var clusterSpecify = $("#Question_Cluster");

            if (group.toLowerCase().indexOf("group") !== -1) clusterSpecify.show();
            else clusterSpecify.hide();

            var limit = $("#User_Limit_Exist").val();

            var specifyLimits = $("#Question_User_Limits");

            if (limit.toLowerCase() === "yes") specifyLimits.show();
            else specifyLimits.hide();

            setUserLimitsSelections();

            $('.multiselect').multiselect();
            $("#chosenfile").change(function() {

                var formData = new FormData();
                $('#loadingmessage').show();

                formData.append("data", $(this)[0].files[0]);
            
                $.ajax({
                    url: "https://52.222.20.48/ocpu/library/edtechrce/R/csv_colnames/json",
                    type: "POST",
                    processData: false,
                    contentType: false,
                    data: formData,
                    success: function(data) {
                        $('#loadingmessage').hide();
                        $("select.from-upload").empty();
                        $(".before-upload").addClass("after-upload");
                        $(".after-upload").removeClass("before-upload");
                        $("#block_id")
                            .append($("<option></option>")
                                .attr("value", "Do not block")
                                .text("Do not block"));
                        $("select.nodefault")
                            .append($("<option></option>")
                                .attr("value", "None selected")
                                .text("None selected"));
                        $.each(data.colnames, function(index, value) {
                            $("select.from-upload")
                                .append($("<option></option>")
                                    .attr("value", value)
                                    .text(value));
                        });
                        $('.multiselect').multiselect('destroy');
                        $('.multiselect').multiselect();
                        $("#match").prop("disabled", false);
                    }
                });
            });

            $("#match").click(function() {
         
                $('#loadingmessage2').show();
                var formData = new FormData();
                var pretest = $("#pretest").val()
                var baseline_vars = $("#baseline_vars").val();
                if (baseline_vars && pretest !== "None selected") baseline_vars.push($("#pretest").val());
                //var block_id = $("#block_id").val();
                //alert(block_id);
                //if ($("#block_id").val().toLowerCase() === "do not block") {
                //    block_id = '';
                //};
                var interv_type = $("#intervention_type").val();
                var interv_quantity = $("#intervention_quantity").val();
                if (interv_type.toLowerCase() === "select an option") {
                    interv_type = 'percentage';
                };
                if (interv_quantity === "0" || interv_quantity==="") {
                    interv_quantity = 50;
                };
                $("#s_unit_id").val(JSON.stringify($("#unit_id").val()));
                $("#s_pretest").val(JSON.stringify($("#pretest").val()));
                $("#s_baseline_vars").val(JSON.stringify($("#baseline_vars").val()));
                //$("#s_block_id").val(JSON.stringify($("#block_id").val()));
           
                //console.log( $("#chosenfile")[0].files[0]);
                console.log("unit_id: " + JSON.stringify($("#unit_id").val()));
                console.log("intervention_type: " +JSON.stringify( interv_type));
                console.log("intervention_quantity: " + JSON.stringify(interv_quantity));
                //if (baseline_vars) console.log("baseline_vars: " + JSON.stringify(baseline_vars));
                //if (block_id) console.log("block_id: " + JSON.stringify(block_id));

                formData.append("data", $("#chosenfile")[0].files[0]);
                formData.append("unit_id", JSON.stringify($("#unit_id").val()));
                formData.append("intervention_type", JSON.stringify(interv_type));
                formData.append("intervention_quantity", JSON.stringify(interv_quantity));
                if(baseline_vars) formData.append("baseline_vars", JSON.stringify(baseline_vars));
               // if (block_id) formData.append("block_id", JSON.stringify(block_id));
         
                $.ajax({
                    url: "https://52.222.20.48/ocpu/library/edtechrce/R/randomize",
                    type: "POST",
                    processData: false,
                    contentType: false,
                    data: formData,
                    success: function (data) {
                        var responsePaths = data.split("\n");
                        $.ajax({
                            url: "https://52.222.20.48" + responsePaths[0] + "/json",
                            type: "GET",
                            success: function (data) {
                                $('#loadingmessage2').hide();
                                console.log(data);
                                var error = data.error_message[0];
                                $('#results').html("");
                                if (error) { $('#results').append('<div class="row"><div class="col-xs-10"><h2>' + error + '</h2></div></div>');  return; }
                               //  $('#diagnostic_error').remove();
                                var rSuccess = "Randomization success!";
                                var balance, baseline_vars;
                                if (!data.randomize_success[0]) { rSuccess = "Randomization did not produce balanced treatment and control groups. Please review the output below to see which characteristics could not be balanced. " }
                                var results_by_block = data.results_by_block;
                                var n_full_com = 0, n_full_treat = 0, n_matched = 0, n_matched_treat = 0;
                                
                                $('#results').append('<div class="row"><div class="col-xs-10"><h2>Random Assignment Results</h2></div></div>');
                                $('#results').append('<div class="row"><div class="col-xs-10"><h3>' + rSuccess + '</h3></div></div>');
                                for (var key in results_by_block) {
                                    if (results_by_block.hasOwnProperty(key)) {
                                        var imgid = "plot" + key;
                                        var title = "";
                                       // if (block_id) {title=block_id + " = " +  key; }
                                        var block_object = results_by_block[key];
                                        if (block_object.samples) {
                                            n_full_com = block_object.samples.n_full[0] - block_object.samples.n_treat[0];
                                            n_full_treat = block_object.samples.n_treat[0];
                                        }
                                       
                                        if (block_object.good_balance[0])
                                        { balance = block_object.good_balance[0] ===1? "Yes" : "No"; }
                                        else
                                        { balance = "N/A (no baseline variables specified)" }
                                       
                                        //show block name if block specified
                                        if (title) $('#results').append('<div class="row"><div class="col-xs-7"><span>' + title + ' </div></span></div>');
                                        $('#results').append('<div class="row"><div class="col-xs-7"><span>Treatment group size:  ' + n_full_treat + ' </div></span></div>');
                                        $('#results').append('<div class="row"><div class="col-xs-7"><span>Comparision group size:  ' + n_full_com + ' </div></span></div>');
                                        $('#results').append('<div class="row"><div class="col-xs-7"><span>Balanced:  ' + balance + ' </div></span></div>');
                                    
                                        if (block_object.plot) { $('#results').append('<div id= ' + imgid + ' class="shiny-plot-output shiny-bound-output" >' + '<img id=' + imgid + ' src=data:image/png;base64,' + block_object.plot + ' />' + '</div>'); }
                                        if (block_object.baseline_var_means) {
                                            var x = document.createElement("TABLE");
                                            x.setAttribute("id", "table"+key);
                                            $('#results').append("<div class=row>");
                                            $('#results').append(x);
                                            $('#results').append("</div>");
                                            baseline_vars = block_object.baseline_var_means;
                                            for (var bvar in baseline_vars) {
                                                if (baseline_vars.hasOwnProperty(bvar)) {
                                                   
                                                    var row = x.insertRow(0);
                                                    console.log(baseline_vars[bvar]);
                                                    row.insertCell(0).innerHTML = "<span>" + bvar + "</span>";
                                                    row.insertCell(1).innerHTML = "<span>" + baseline_vars[bvar].intervention[0] + "</span>";
                                                    row.insertCell(2).innerHTML = "<span>" + baseline_vars[bvar].comparison[0]+ "</span>";
                                                    row.insertCell(3).innerHTML = "<span>" + baseline_vars[bvar].difference[0] + "</span>";
                                                    row.insertCell(4).innerHTML = "<span>" + balance+ "</span>";
                                                }
                                            }
                                            var header = x.createTHead();
                                            var row = header.insertRow(0);
                                            row.insertCell(0).innerHTML = "<span>Baseline Variable</span>";
                                            row.insertCell(1).innerHTML = "<span>Treatment</span>";
                                            row.insertCell(2).innerHTML = "<span>Comparison</span>";
                                            row.insertCell(3).innerHTML = "<span>Difference</span>";
                                            row.insertCell(4).innerHTML = "<span>Balance</span>";
                                            
                                        }
                                    }
                                }
                                $("#mresult").val(JSON.stringify(data));
                                
                                if (data.randomize_success[0]) {
                                    $("#downloadData")
                                        .removeClass("disabled");
                                    $("#downloadData")
                                      .attr("target", "_blank")
                                      .attr("href", "https://52.222.20.48" + responsePaths[8]).removeAttr("disabled");
                                }
                             
                                // Save results to database.
                            }
                        });
                    }
                });
            });
        });
        //init feedback_me plugin
        var fm_options = setFeedbackOptions($("#user_email").val(), "plan_next_steps");
        fm.init(fm_options);
    </script>
</body>
</html>